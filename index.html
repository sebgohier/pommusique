<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Espace Prof ‚Äì √âcole de musique</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
    }
    .container {
      display: flex;
      height: 100vh;
    }
    /* MENU GAUCHE */
    .menu {
      width: 250px;
      background-color: #4a86e8;
      color: white;
      padding: 20px;
    }
    .menu h2 {
      margin-top: 0;
      font-size: 18px;
      margin-bottom: 20px;
    }
    .menu button {
      width: 100%;
      margin-bottom: 10px;
      padding: 10px;
      background-color: white;
      color: #4a86e8;
      border: none;
      cursor: pointer;
      text-align: left;
      font-weight: bold;
    }
    .menu button:hover {
      background-color: #e6e6e6;
    }
    /* CONTENU */
    .content {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
    }
    .panel {
      display: none;
    }
    .panel.active {
      display: block;
    }
    input, select, button {
      padding: 5px;
      margin-top: 5px;
      width: 200px;
    }
    label {
      display: block;
      margin-bottom: 10px;
    }
    button[type="submit"] {
      width: 150px;
      background-color: #4a86e8;
      color: white;
      border: none;
      cursor: pointer;
    }
    button[type="submit"]:hover {
      background-color: #3572b0;
    }
    #confirmation, #confirmation_abs {
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>

<div class="container">
  <!-- MENU -->
  <div class="menu">
    <h2>Espace Prof</h2>
    <button onclick="showPanel('repertoire')">üìí R√©pertoire √©l√®ves</button>
    <button onclick="showPanel('planning')">üìÖ Planning √©cole</button>
    <button onclick="showPanel('heures')">‚è±Ô∏è Heures suppl√©mentaires</button>
    <button onclick="showPanel('absences')">üö´ Demande d‚Äôabsence</button>
    <button onclick="showPanel('materiel')">üé∏ Emprunt mat√©riel</button>
    <button onclick="showPanel('contacts')">üìû Contacts</button>
  </div>

  <!-- CONTENU -->
  <div class="content">

    <!-- R√©pertoire -->
    <div id="repertoire" class="panel active">
      <h1>R√©pertoire de mes √©l√®ves</h1>
      <p>Ici s‚Äôaffichera la liste des √©l√®ves du prof.</p>
    </div>

    <!-- Planning -->
    <div id="planning" class="panel">
      <h1>Planning de l‚Äô√©cole</h1>
      <p>Vue planning (lecture seule).</p>
    </div>

    <!-- Heures suppl√©mentaires -->
    <div id="heures" class="panel">
      <h1>Heures suppl√©mentaires</h1>
      <form id="heuresForm">
        <label>Date : <input type="date" id="date" required></label>
        <label>Type : 
          <select id="type" required>
            <option value="Concert">Concert</option>
            <option value="R√©p√©tition">R√©p√©tition</option>
            <option value="Autre">Autre</option>
          </select>
        </label>
        <label>Heure d√©but : <input type="time" id="heureDebut" required></label>
        <label>Heure fin : <input type="time" id="heureFin" required></label>
        <label>Lieu : <input type="text" id="lieu" placeholder="Salle √† remplir" required></label>
        <button type="submit">Envoyer</button>
      </form>
      <p id="confirmation" style="color:green;"></p>
    </div>

    <!-- Absences -->
    <div id="absences" class="panel">
      <h1>Demande d‚Äôautorisation d‚Äôabsence</h1>
      <form id="absencesForm">
        <label>Date d'absence : <input type="date" id="abs_dateAbsence" required></label>
        <label>Cr√©neau horaire : <input type="text" id="abs_creneauAbsence" placeholder="09h30-11h00" required></label>
        <label>Date de rattrapage : <input type="date" id="abs_dateRattrapage" required></label>
        <label>Cr√©neau de rattrapage : <input type="text" id="abs_creneauRattrapage" placeholder="14h00-15h30" required></label>
        <label>Salle : <input type="text" id="abs_salle" placeholder="Salle √† remplir" required></label>
        <label>Accord √©l√®ves/responsables : 
          <select id="abs_accord">
            <option value="oui">Oui</option>
            <option value="non">Non</option>
          </select>
        </label>
        <button type="submit">Envoyer</button>
      </form>
      <p id="confirmation_abs" style="color:green;"></p>
    </div>

    <!-- Emprunt mat√©riel -->
    <div id="materiel" class="panel">
      <h1>Emprunt de mat√©riel</h1>
      <p>Formulaire et historique des emprunts.</p>
    </div>

    <!-- Contacts -->
    <div id="contacts" class="panel">
      <h1>Contacts</h1>
      <p>Coordonn√©es des profs et de la direction.</p>
    </div>

  </div>
</div>

<script>
  function showPanel(id) {
    document.querySelectorAll('.panel').forEach(panel => panel.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  // URL Web App (m√™me pour les deux)
  const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzy91QR2q1I6qkSvRC894ZyLodIsIAoydV3NleFoKVHrSdj38BlmGTAAwVpYeNDuxLmCQ/exec";

  // FORMULAIRE HEURES SUP
  document.getElementById("heuresForm").addEventListener("submit", function(e){
    e.preventDefault();
    var data = {
      date: document.getElementById("date").value,
      type: document.getElementById("type").value,
      heureDebut: document.getElementById("heureDebut").value,
      heureFin: document.getElementById("heureFin").value,
      lieu: document.getElementById("lieu").value
    };
    fetch(WEB_APP_URL, {
      method: "POST",
      body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(res => {
      if(res.status === "success") {
        document.getElementById("confirmation").textContent = "Demande envoy√©e avec succ√®s !";
        document.getElementById("heuresForm").reset();
      } else {
        document.getElementById("confirmation").textContent = "Erreur : " + res.message;
      }
    })
    .catch(err => {
      document.getElementById("confirmation").textContent = "Erreur : " + err;
    });
  });

  // FORMULAIRE ABSENCES
  document.getElementById("absencesForm").addEventListener("submit", function(e){
    e.preventDefault();
    var data = {
      dateAbsence: document.getElementById("abs_dateAbsence").value,
      creneauAbsence: document.getElementById("abs_creneauAbsence").value,
      dateRattrapage: document.getElementById("abs_dateRattrapage").value,
      creneauRattrapage: document.getElementById("abs_creneauRattrapage").value,
      salle: document.getElementById("abs_salle").value,
      accord: document.getElementById("abs_accord").value
    };
    fetch(WEB_APP_URL, {
      method: "POST",
      body: JSON.stringify(data)
    })
    .then(response => response.json())
    .then(res => {
      if(res.status === "success") {
        document.getElementById("confirmation_abs").textContent = "Demande envoy√©e avec succ√®s !";
        document.getElementById("absencesForm").reset();
      } else {
        document.getElementById("confirmation_abs").textContent = "Erreur : " + res.message;
      }
    })
    .catch(err => {
      document.getElementById("confirmation_abs").textContent = "Erreur : " + err;
    });
  });
</script>

</body>
</html>
